/*!Sea.js 2.2.3|https://github.com/seajs/seajs/blob/master/LICENSE.md*/
((e,t)=>{if(e.seajs)return;let a=e.seajs={},i=a.data={},l=e=>t=>({}.toString.call(t)==`[object ${e}]`),r=l("String"),n=Array.isArray,s=l("Function"),b=0,o=()=>b++,c=/[^?#]*\//,d=/\/\.\//g,m=/\/[^/]+\/\.\.\//,f=/([^:/])\/\//g,h=e=>e.match(c)[0],g=e=>{for(e=e.replace(d,"/");e.match(m);)e=e.replace(m,"/");return e=e.replace(f,"$1/")},k=/^([^/:]+)(\/.+)$/,p=/^\/\/.|:\//,u=/^.*?\/\/.*?\//,x=(e,t)=>{if(!e)return"";let a=((e,t)=>{let a,l=e.charAt(0);if(p.test(e))a=e;else if("."===l)a=g((t?h(t):i.cwd)+e);else if("/"===l){let t=i.cwd.match(u);a=t?t[0]+e.substring(1):e}else a=i.base+e;return 0===a.indexOf("//")&&(a=location.protocol+a),a})(e=(e=>{let t=e.length-1,a=e.charAt(t);return"#"===a?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===a?e:e+".js"})(e=(e=>{let t,a=i.paths;return a&&(t=e.match(k))&&r(a[t[1]])&&(e=a[t[1]]+t[2]),e})(e=(e=>{let t=i.alias;return t&&r(t[e])?t[e]:e})(e))),t);return a},v=document,w=h(v.URL),y=v.scripts,_=y[y.length-1],M=h(((T=_).hasAttribute?T.src:T.getAttribute("src",4))||w);var T;let I,j,S,A=v.head,z=A.getElementsByTagName("base")[0],$=/\.css(?:\?|$)/i,C=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,D=(e,t,a)=>{let l="onload"in e;if(a&&(C||!l))return void setTimeout((()=>{U(e,t)}),1);let r=()=>{e.onload=e.onerror=e.onreadystatechange=null,a||i.debug||A.removeChild(e),e=null,t()};l?(e.onload=r,e.onerror=r):e.onreadystatechange=()=>{/loaded|complete/.test(e.readyState)&&r()}},U=(e,t)=>{let a,i=e.sheet;if(C)i&&(a=!0);else if(i)try{i.cssRules&&(a=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(a=!0)}setTimeout((()=>{a?t():U(e,t)}),20)},E=()=>{if(I)return I;if(j&&"interactive"===j.readyState)return j;let e=A.getElementsByTagName("script");for(let t=e.length;t--;){let a=e[t];if("interactive"===a.readyState)return j=a,j}},H=a.cache={},B={},O={},V={},P=1,q=2,L=3,R=4,F=5,J=6;function N(e,t){this.uri=e,this._bH=t||[],this.exports=null,this.status=0,this._bI={},this._bJ=0}N.prototype.resolve=function(){let e=this,t=e._bH,a=[];for(let i=0,l=t.length;i<l;i++)a[i]=x(t[i],e.uri);return a},N.prototype.load=function(){let e=this;if(e.status>=L)return;e.status=L;let t,a=e.resolve(),i=e._bJ=a.length;for(let l=0;l<i;l++)t=N.get(a[l]),t.status<R?t._bI[e.uri]=(t._bI[e.uri]||0)+1:e._bJ--;if(0===e._bJ)return void e.onload();let l={};for(let e=0;e<i;e++)t=H[a[e]],t.status<P?t.fetch(l):t.status===q&&t.load();for(let e in l)l.hasOwnProperty(e)&&l[e]()},N.prototype.onload=function(){let e=this;e.status=R,e._bK&&e._bK();let t,a,i=e._bI;for(t in i)i.hasOwnProperty(t)&&(a=H[t],a._bJ-=i[t],0===a._bJ&&a.onload());delete e._bI,delete e._bJ},N.prototype.fetch=function(e){let t=this,a=t.uri;if(t.status=P,!a||O[a])return void t.load();if(B[a])return void V[a].push(t);B[a]=!0,V[a]=[t];let l=()=>{delete B[a],O[a]=!0,S&&(N.save(a,S),S=null);let e,t=V[a];for(delete V[a];e=t.shift();)e.load()},r=()=>{((e,t,a,i)=>{let l=$.test(e),r=v.createElement(l?"link":"script");a&&(r.charset=a),null!=i&&r.setAttribute("crossorigin",i),D(r,t,l,e),l?(r.rel="stylesheet",r.href=e):(r.async=!0,r.src=e),I=r,z?A.insertBefore(r,z):A.appendChild(r),I=null})(a,l,i.charset,i.crossorigin)};e?e[a]=r:r()},N.prototype.exec=function(){let e=this;if(e.status>=F)return e.exports;e.status=F;let a=e.uri,i=e=>N.get(i.resolve(e)).exec();i.resolve=e=>x(e,a),i.async=(e,t)=>(N.use(e,t,a+"__bL_"+o()),i);let l=e.factory,r=s(l)?l(i,e.exports={},e):l;return r===t&&(r=e.exports),delete e.factory,e.exports=r,e.status=J,r},N.define=function(e,a,i){let l=arguments.length;1===l?(i=e,e=t):2===l&&(i=a,n(e)?(a=e,e=t):a=t),!n(a)&&s(i)&&(a=[]);let r={id:e,uri:x(e),deps:a,factory:i};if(!r.uri&&v.attachEvent){let e=E();e&&(r.uri=e.src)}r.uri?N.save(r.uri,r):S=r},N.save=(e,t)=>{let a=N.get(e);a.status<q&&(a.id=t.id||e,a._bH=t.deps||[],a.factory=t.factory,a.status=q)},N.get=(e,t)=>H[e]||(H[e]=new N(e,t)),N.use=(t,a,i)=>{let l=N.get(i,n(t)?t:[t]);l._bK=()=>{let t=[],i=l.resolve();for(let e=0,a=i.length;e<a;e++)t[e]=H[i[e]].exec();a&&a.apply(e,t),delete l._bK},l.load()},a.use=(e,t)=>{N.use(e,t,i.cwd+"__bM_"+o())},e.define=N.define,a.require=e=>{let t=N.get(x(e));return t.status<F&&(t.onload(),t.exec()),t.exports},i.base=M,i.cwd=w,i.charset="utf-8",a.realpath=g,a.config=e=>{for(let t in e){let a=e[t];i[t]=a}return a}})(window),(e=>{window.define?define("magix5",e):window.Magix=e()})((()=>{let e=0,t="",a=[],i=null,l=window,r=Promise,n=document,s=l.setTimeout,b=encodeURIComponent,o="_";function c(){}let d,m=n.head,f=l.performance,h=f.now.bind(f),g="\x1e",k="mx5-",p="mx5-view",u="mx5-owner",x=t=>(t||o)+e++,v=e=>n.getElementById(e),w=(e,t)=>e.innerHTML=t,y=e=>e[0]==g,_={},M={rootId:x(),error(e){throw e}},T=e=>!e||"object"!=typeof e,I=(e,t,a)=>{if(e&&t&&!(a=e==t))try{a=16==(16&t.compareDocumentPosition(e))}catch(e){}return a},j=e=>{e["\x1ebc"]=0},{assign:S,keys:A,hasOwnProperty:z,prototype:$}=Object,C=$.toString,D=e=>C.call(e).slice(8,-1),U=e=>"Object"==D(e),E=Array.isArray,H=m.getAttribute,B=(e,t)=>H.call(e,t),O=(e,t,a)=>{t&&!O[e]&&(O[e]=1,a=n.createElement("style"),w(a,t),m.appendChild(a))},V=(e,t,a,i)=>{try{i=E(t)?e.apply(a,t):e.call(a,t)}catch(e){M.error(e)}return i},P=(e,t)=>e&&z.call(e,t),q=(e,a)=>{let i,l;if(T(a))i=a+t,y(i)&&(a=e.get(i));else for(i in a)l=a[i],l=q(e,l),a[i]=l;return a},L=(e,t)=>t.bc-e.bc;function R(e,t,a){(a=this).bc=[],a.bd=t||20,a.be=a.bd+(e||50)}S(R.prototype,{get(e){let t=this.bc[g+e];return t&&(t.bc++,t=t.bd),t},set(e,t){let a=this,i=a.bc,l=g+e,r=i[l],n=a.bd;if(!r){if(i.length>a.be)for(i.sort(L);n--;)r=i.pop(),r.bc&&a.del(r.be);r={be:e},i.push(r),i[l]=r}r.bd=t,r.bc=1},del(e){e=g+e;let a=this.bc,i=a[e];i&&(i.bc=0,i.bd=t,delete a[e])},has(e){return P(this.bc,g+e)}});let F,J,N,Y,K,W={bubbles:!0,cancelable:!0},Z=[],Q=(e,t,a,i)=>e.addEventListener(t,a,i),G=(e,t,a,i)=>e.removeEventListener(t,a,i),X=(e,t,a,i,l,r)=>{let n={bc:l,bd:a,be:t,bf:e,bg(e){l?V(a,e,r):a(e)}};Z.push(n),Q(e,t,n.bg,i)},ee=(e,t,a,i,l)=>{for(let r,n=Z.length;n--;)if(r=Z[n],r.be==t&&r.bc==l&&r.bf==e&&r.bd===a){Z.splice(n,1),G(e,t,r.bg,i);break}},te=new R,ae=(e,t=1,a)=>(t&&te.has(e)?a=te.get(e):(a=V(Function(`return ${e}`)),t&&te.set(e,a)),a),ie=decodeURIComponent,le=new R,re=e=>{let a,i,l,r,n,s,b=le.get(e);if(!b){if(r={},n=e.indexOf("?"),-1==n?(a=e,s=t):(a=e.substring(0,n),s=e.substring(n+1)),s)for(n of s.split("&"))n&&([i,l=t]=n.split("="),r[ie(i)]=y(l)?l:ie(l));le.set(e,b={a:a,b:r})}return{path:b.a,params:S({},b.b)}},ne=new R,se=(e,t,a)=>(ne.has(e)?a=ne.get(e):(a=ae(e,0),e.includes(g)?q(t,a):ne.set(e,a)),a),be=navigator.scheduling,oe=()=>{let e,t,a,l=h()+9;for(;;){if(!J){K=F=i;break}if(Y==J&&(Y=i),N=J,a=J.bc,e=J.bd,t=J.be,t&&V(t,e,a),J=J.bf,N=i,J&&(h()>l||be&&be.isInputPending())){s(oe);break}}},ce=(e,t,a,i,l)=>{l={be:e,bc:a,bd:t},i?(K?K.bf=l:J=l,K=l):((i=Y||N)?(l.bf=i.bf,i.bf=l,K==i&&(K=l)):J?(l.bf=J,J=l):J=K=l,Y=l),F||(F=1,s(oe))},de=(e,t,a)=>{ce(e,t,a,1)},me=(e,t)=>{if(e){let a=[];seajs.use(e,((...e)=>{for(let t of e)a.push((i=t).__esModule||window.Symbol&&"Module"===i[Symbol.toStringTag]?t.default:t);var i;ce(t,a)}))}else ce(t)},fe=e=>e;let he,ge,ke={fire(e,t){let a,l,r=this,n=r[g+e],s=0;if(t||(t={}),t.type=e,n)for(a=n.length;s<a;s++)l=n[s],l.bc&&(l.bd=1,V(l.bc,t,r),l.bc||(n.splice(s--,1),a--),l.bd=i)},on(e,t,a=0){let i,l,r,n=g+e,s=this[n]||(this[n]=[]),b={bc:t,be:a};for(r=0,l=s.length;r<l;r++)if(s[r].be<a){s.splice(r,0,b),i=1;break}i||s.push(b)},off(e,t){let a,l=g+e,r=this,n=r[l];if(t){if(n&&(a=n.length))for(;a--;)if(l=n[a],l.bc==t){l.bd?l.bc=i:n.splice(a,1);break}}else r[l]=i}},pe={},ue=(e,t,a,i)=>{t.includes(g)&&(i=pe[e])&&q(i.bc,a)},xe=(e,t,a,i,l,r,n)=>{for(t=e.be,l=e.bf;t.length;)[a,n,i]=t.shift(),a&&ce(i,(r=l[a])&&V(r,n,l))},ve=(e,t,a)=>{let i,l,r;for(i in e.bd)t?(l=pe[i],r=l&&I(l.root,t)&&(!a||l.root!=t)):r=1,r&&e.unmount(i,r)},we=e=>{let{bf:t,root:a}=e;t&&(e.bf=0,t.bc&&(t.bc=0,j(t),ve(e),t.fire("destroy"),ft(t,1),a&&e.bg&&w(a,e.bh))),e.bi++},ye=(e,t,a)=>{let i,l,r,n,s,{id:b,root:o}=e;!e.bg&&o&&(e.bg=1,e.bh=o.innerHTML),we(e),o&&t&&(i=re(t),r=i.path,e.path=t,n=i.params,s=B(o,u),ue(s,t,n),e.bj=r,S(n,a),l=e.bi,me(r,(t=>{l==e.bi&&(t?(xt(t),r=new t(b,o,e,n),e.bf=r,ft(r),V(r.init,n,r),V(r.bh,[n,e.bh],r),r.bi(),r.bj||r.bk||mt(r)):M.error(Error(`${b} cannot load:${r}`)))})))},_e=e=>e.bd||(e.bd=x(ge));function Me(e,t){let a=this,i=_e(e);var l,r;a.id=i,a.root=e,a.bi=1,a.bd={},a.pId=t,a.be=[],a.bc=new Map,r=a,P(pe,l=i)||(pe[l]=r)}S(Me,{root:()=>he,all:()=>pe,byId:e=>pe[e],byNode:e=>pe[e.bd]}),S(Me.prototype,{mount(e,t,a){let i,l=this,r=l.id,n=l.bd,s=_e(e);return i=pe[s],i||(P(n,s)||(l.bk=0),n[s]=s,i=new Me(e,r)),ye(i,t,a),i},unmount(e,t){let a,l;var r,n,s;e=e?this.bd[t?e:e.bd]:this.id,a=pe[e],a&&(l=a.pId,we(a),(n=pe[r=e])&&(delete pe[r],(s=n.root).bc=0,s.bd=0,n.id=n.root=n.pId=n.bd=i),a=pe[l],a&&P(a.bd,e)&&(delete a.bd[e],a.bk=0))},children(){return this.bk||(this.bk=A(this.bd))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=pe[t.pId];return t},invoke(e,t){let a,i,l=this,n=l.be;return new r((r=>{(a=l.bf)&&a.bk?r((i=a[e])&&V(i,t,a)):n.push([e,t,r])}))}});let Te=new R,Ie=/^([\w\-]+)\x1e(\d+)?(\x1e)?([^(]+)\(([\s\S]*?)\)$/,je={},Se={},Ae={},ze={},$e={capture:!0,passive:!1},Ce={capture:!0,passive:!0},De={capture:!1,passive:!1},Ue={capture:!1,passive:!0},Ee=(e,l)=>{let r,n,s,b,o,c,m,f,h,g=[],p=e,u=B(e,k+l);if(u&&(o=Te.get(u),o||(o=u.match(Ie)||a,o={v:o[1],b:0|o[2],t:o[3],n:o[4],i:o[5]},Te.set(u,o)),o=S({},o)),o&&!o.v||Se[l]){if(f=p.be,f==i){for(m=[p];p!=d&&(p=p.parentNode);){if(pe[n=p.bd]||(n=p.be)){f=n;break}m.push(p)}for(u of m)u.be=f||t}if(p=e.bd,pe[p]&&(h=f=p),f)do{if(r=pe[f],r&&(c=r.bf)){if(s=c.bl,b=s[l],b)for(p=b.length;p--;)n=b[p],s={r:n,v:f,n:n},n?!h&&e.matches(n)&&g.push(s):h&&g.push(s);if(c.bj&&!h)break;h=0}}while(r&&(f=r.pId))}return o&&g.push(o),g},He=e=>{let t,a,i,l,r,n,s,b,{target:o,type:c}=e,m=[];for(;o&&o!=d&&!e.cancelBubble&&(!(a=o.bf)||!a[c]);){if(b=1,o.nodeType==b){if(t=Ee(o,c),t.length)for(n of(m.length=0,t)){let{v:t,n:a,i:d,t:m,b:f}=n;0,i=pe[t],l=i&&i.bf,l&&l.bk&&l.bc&&(r=a+g+c,n=l[r],n&&(e.eventTarget=o,s=d?se(d,i.bc):_,e.params=s,V(n,e,l)),o==l.root||l.bl[c]||(m?b=f||b:(o=l.root,b=0)))}else m.push(o);b&&(i=o.bd,i&&(i=pe[i],l=i&&i.bf,l&&l.bm[c]&&(m.length=0)))}for(;b--;)o=o.parentNode}for(o of m)a=o.bf||(o.bf={}),a[c]=1},Be=(e,t,a,i)=>{let l=0|je[e],r=ze[e]||(ze[e]={}),n=a?-1:1,s=a?ee:X;4&i&&(r[4]=(0|r[4])+n),8&i&&(r[8]=(0|r[8])+n),1&i&&(r[1]=(0|r[1])+n),2&i&&(r[2]=(0|r[2])+n);let b,o=Ae[e];b=r[2]?r[4]?$e:De:r[4]?Ce:Ue,l&&a!==l?b!=o&&(ee(d,e,He,o),X(d,e,He,b)):s(d,e,He,a?o:b),Ae[e]=b,je[e]=l+n,t&&(Se[e]=(0|Se[e])+n)};let Oe={"&":38,"<":60,">":62,'"':34,"'":39,"`":96},Ve=/[&<>"'\`]/g,Pe=e=>`&#${Oe[e]};`,qe=e=>(e+t).replace(Ve,Pe),Le={"!":1,"'":7,"(":8,")":9,"*":"A"},Re=e=>"%2"+Le[e],Fe=/[!')(*]/g,Je=e=>b(e).replace(Fe,Re),Ne=/[\\'"]/g,Ye=e=>(e+t).replace(Ne,"\\$&"),Ke=(e,t,a)=>(e.has(t)?a=e.get(t):(a=g+(a||e.bc++),e.has(a)||(e.set(t,a),e.set(a,t))),a),We=(e,t,i)=>{if(e.bc&&(i=e.bj)){let l,r=e.bn,n=e.id,s=pe[n],b={bc:[],bd:[],be:0},o=e.bf,c=s.bc;e.bo=0,e.bn={},t&&e.fire("dompatch"),c.bc=0,c.clear(),l=i(o,Qe,n,Je,c,Ke,Ye,E);let d=()=>{if(e.bp=l,e.bc)for(l of((i=b.bf||!e.bk)&&mt(e),b.bc))ce(l.bi,a,l);if(e.bq>1)e.bq=1,b.bd.length=0,We(e);else{for([l,n,c]of(e.bq=0,b.bd))l[n]!=c&&(l[n]=c);for(l of(e.fire("domready"),r=e.br,r))l();r.length=0}};ce(bt,[e.root,e.bp,l,b,s,r,e,d])}},Ze="textarea",Qe=(e,a,l,r)=>{let n;if(e){a=a||_;let s,b,c,d,m,f,h=t,k=1==l,u=r,x=r,v=0,w=`<${e}`,y=t,M=0;if(l&&1!=l)for(c of l){if(c.bd)b=c.bd+(c.be?"/>":`>${c.bf}</${c.bg}>`);else if(b=c.bf,c.bg==Ge){if(!b)continue;b=qe(b)}y+=b,f&&c.bg==Ge&&f.bg==Ge?f.bf+=c.bf:(c.bh&&(d||(d={}),d[c.bh]=(d[c.bh]||0)+1,v++),u=u||c.bi,f=c,m||(m=[]),m.push(c))}for(s in r=r||_,a)b=a[s],!1!==b&&b!=i?(!0===b&&(a[s]=b=r[s]?b:t),"#"!=s&&"id"!=s&&s!=o||h||(h=b,"id"==s)?(s==p&&b&&(M=1,h||(h=e+g+re(b).path)),"value"==s&&e==Ze?y=b:"$"==s?(u=b,delete a[s]):w+=` ${s}="${b&&qe(b)}"`):delete a[s]):r[s]||delete a[s];n={bf:y,bh:h,bg:e,bj:M,bi:u,bk:r,bl:x,bd:w,bm:a,bn:m,bo:d,bp:v,be:k}}else n={bg:l?g:Ge,bf:a+t};return n};let Ge=e;let Xe="http://www.w3.org/",et={svg:`${Xe}2000/svg`,math:`${Xe}1998/Math/MathML`},tt=(e,a,i,l)=>{let r,n,s,b,o,c=0,d=a.bk,m=a.bm;if(i)for(r in s=i.bk,b=i.bm,b)P(m,r)||(c=1,(o=s[r])?l?l.bd.push([e,o,t]):e[o]=t:e.removeAttribute(r));for(r in m)n=m[r],(o=d[r])?i&&e[o]==n||(c=1,l?l.bd.push([e,o,n]):e[o]=n):i&&b[r]==n||(c=1,e.setAttribute(r,n));return c},at=(e,t)=>{let a,i=e.bg;return i==Ge?a=n.createTextNode(e.bf):(a=n.createElementNS(et[i]||t.namespaceURI,i),tt(a,e),w(a,e.bf)),a},it=(e,t,a,i,l)=>{let r,n,s,b={};for(r=i;r>=a;r--,l--)n=e[r],s=n.bh,s&&(n=b[s]||(b[s]=[]),n.push(t[l]));return b},lt=(e,t)=>e.bh&&t.bh==e.bh||!e.bh&&!t.bh&&e.bg==t.bg||e.bg==g||t.bg==g,rt=(e,t,a,i)=>{a&&((i=pe[e.bd])?i.unmount():ve(t,e))},nt=(e,t,a,i,l,r)=>{l.bc&&(rt(e,a,1==e.nodeType),t.removeChild(e),--i.be||ce(r))},st=(e,t,a,i,l,r,n)=>{l.bc&&(t.bg==g?(ve(e),w(e,t.bf)):e.insertBefore(at(t,e),a[i]),--r.be||ce(n))},bt=(e,l,r,n,s,b,o,c)=>{if(o.bc)if(l){if(l.bi||l.bf!=r.bf){let d,m,f,h,k,p=l.bn||a,u=r.bn||a,x=r.bo||_,v=r.bp,y=l.bp,M=e.childNodes,T=0,I=u.length,j=p.length-1,S=0,A=I-1;0;let z,$=p[T],C=p[j],D=u[S],U=u[A],E=T,H=j;for(;T<=j&&S<=A;)if($)if(C)if(lt(D,$))D.bg==g||$.bg==g?(n.bf=1,ve(e),D.bg==g?(H=0,w(e,D.bf)):(w(e,t),e.appendChild(at(D,e)))):(n.be++,ce(ot,[M[E],e,$,D,n,s,b,o,c])),x[$.bh]&&(x[$.bh]--,v--,h=k&&k[$.bh],h&&--k[$.bh]),E++,$=p[++T],D=u[++S];else if(lt(U,C))n.be++,ce(ot,[M[H],e,C,U,n,s,b,o,c]),x[C.bh]&&(x[C.bh]--,v--),H--,C=p[--j],U=u[--A];else if(lt(U,$))m=M[E],e.insertBefore(m,M[H+1]),n.be++,ce(ot,[m,e,$,U,n,s,b,o,c]),x[$.bh]&&(x[$.bh]--,v--),H--,$=p[++T],U=u[--A];else if(lt(D,C))m=M[H],e.insertBefore(m,M[E++]),n.be++,ce(ot,[m,e,C,D,n,s,b,o,c]),x[C.bh]&&(x[C.bh]--,v--),C=p[--j],D=u[++S];else{if(!k&&v>0&&y>0&&(k=it(p,M,T,j,H)),z=M[E],h=k&&k[D.bh],h&&(h=h.pop())){if(f=$,h!=z){for(m=T+1,d=E+1;m<=j;m++)if(f=p[m],f&&M[d++]==h){p[m]=i;break}T--,e.insertBefore(h,z)}x[f.bh]&&x[f.bh]--,n.be++,ce(ot,[h,e,f,D,n,s,b,o,c])}else k&&k[$.bh]&&x[$.bh]||pe[z.bd]&&!D.bj?(n.bf=1,e.insertBefore(at(D,e),z),T--,H++):(n.be++,ce(ot,[z,e,$,D,n,s,b,o,c]));++E,$=p[++T],D=u[++S]}else C=p[--j];else $=p[++T];for(d=S,m=1;d<=A;d++,m++)f=u[d],n.bf=1,n.be++,ce(st,[e,f,M,H+m,o,n,c]);for(!I&&$&&$.bg==g&&(H=M.length-1),d=H;d>=E;d--)n.bf=1,n.be++,ce(nt,[M[d],e,s,n,o,c])}}else n.bf=1,w(e,r.bf);n.be||ce(c)},ot=(e,t,a,i,l,r,n,s,b)=>{if(s.bc){0;let o=a.bm,c=i.bm;if(a.bi||a.bd!=i.bd||a.bf!=i.bf)if(a.bg==i.bg){if(a.bg==Ge)l.bf=1,e.nodeValue=i.bf;else if(!o._||o._!=c._){let t,o,d,m,f,h,g,k=c[p],x=i.bf,v=a.bd!=i.bd||i.bl,w=pe[e.bd],y=k&&re(k);if(v&&(v=tt(e,i,a,l),v&&(l.bf=1)),k&&w&&w.bj==y.path&&(m=w.bf)){if(h=x!=a.bf,g=k!=w.path,d=i.bi,!h&&!g&&d)for(d of(f=d.split(","),f))if("#"==d||P(n,d)){g=1;break}(g||h)&&(d=m.bh,f=y.params,ue(c[u],k,f),w.path=k,w.bh=x,!1!==V(d,[f,x],m)&&l.bc.push(m),t=!m.bj)}else t=1,o=w;o&&(l.bf=1,w.unmount()),t&&!i.be&&bt(e,a,i,l,r,n,s,b)}}else l.bf=1,rt(e,r,1),t.replaceChild(at(i,t),e)}--l.be||ce(b)},ct=/^(\$?)([^<]*)<([^>]+)>(?:\s*&(.+))?$/,dt=(e,t,a)=>(e.bc?a=e:((a=function(e,t){for(t of a.bc)V(t,e,this)}).bc=[e],a.bd=1),a.bc=a.bc.concat(t.bc||t),a),mt=e=>{let t,a;e.bc&&(a=e.bk,e.bk=1,t=e.owner,((e,t,a)=>{for(a of(t=t||e.root).querySelectorAll(`[mx5-view][mx5-owner="${e.id}"]`))a.bc||(a.bc=1,e.mount(a,B(a,p)))})(t),a||ce(xe,t))},ft=(e,t)=>{let a,{bm:i,bl:l,bs:r,id:n}=e;for(a in i)Be(a,l[a],t,i[a]);for(a of(i=t?ee:X,r))i(a.bc,a.bd,a.be,a.bf,n,e)},ht={win:l,doc:n,root:t};function gt(...e){return S(this,...e),this}function kt(...e){let t=this,a=t.bc||(t.bc=[]);return((e,t,a)=>{let i,l,r,n,s={};for(l of e)for(i in l)r=l[i],n=s[i],"ctor"!=i?(ct.test(i)&&(n?r=dt(n,r):r.bd=1),s[i]=r):a.push(r);for(i in s)P(t,i)||(t[i]=s[i])})(e,t.prototype,a),t}let pt=e=>function(...t){return this.bc&&V(e,t,this)},ut=(e,t,a,i)=>{if(e)for(i of e)V(i,t,a)};let xt=e=>{if(!e["\x1e"]){e["\x1e"]=1;let a,l,r,n,s,b,o,c,d,m,f,h=e.prototype,k={},p=[],u={};for(o in h)if(a=h[o],l=o.match(ct),l)for(c of([,b,r,n,f]=l,m=f?ae(f):Ue,n=n.split(","),n)){if(s=ht[r],d=0,m.passive||m.passive==i?d|=1:d|=2,m.capture?d|=4:d|=8,b){if(s){p.push({be:a,bc:s,bd:c,bf:m});continue}s===t&&(r=t),s=u[c],s||(s=u[c]=[]),s[r]||(s[r]=1,s.push(r))}k[c]|=d,c=r+g+c,s=h[c],s?s.bd&&(a.bd?h[c]=dt(a,s):P(h,o)&&(h[c]=a)):h[c]=a}h.bi=h.render=pt(h.render),h.bm=k,h.bs=p,h.bl=u,h.bh=h.assign,h.bj=h.tmpl}};function vt(e,t,a,i,l){(l=this).root=t,l.owner=a,l.id=e,l.bc=1,l.bo=1,l.bf={},l.bn={},l.bq=0,l.br=[],ut(vt.bc,i,l)}S(vt,{merge:kt,extend:function e(t){let a=this,i=(t=t||{}).ctor;function l(e,t,r,n,s){a.call(s=this,e,t,r,n),i&&V(i,n,s),ut(l.bc,n,s)}return l.merge=kt,l.extend=e,l.static=gt,((e,t,a,i)=>(c.prototype=t.prototype,i=new c,S(i,a),i.constructor=e,e.prototype=i,e))(l,a,t)}}),S(vt.prototype,ke,{init:c,render:c,assign:c,get(e,t){return t=this.bf,e&&(t=t[e]),t},set(e,t){let a,i,l,r,n=this,s=n.bf,b=n.bn,o=n.bo;for(l in e)a=e[l],i=s[l],r=t?P(t,l):!T(a)||i!=a,r&&(b[l]=1,o=1),s[l]=a;return n.bo=o,n},digest(e,t){return e=this.set(e,t),new r((t=>{e.bo?(e.bq++,e.br.push(t),1==e.bq&&We(e,1)):e.bq?e.br.push(t):t()}))},finale(){let e=this;return new r((t=>{e.bq?e.br.push(t):t()}))},parse(e){return se(e,this.owner.bc)}});let wt=0;return{version:"5.0.0-beta",config(e,...t){let a=M;return e&&(a=U(e)?S(a,e,...t):a[e]),a},boot(e){var t,a;wt||(wt=1,S(M,e),ye((he||(d=n.body,t=ge=M.rootId,(a=v(t))||(a=d),he=new Me(a)),he),M.defaultView))},unboot(){wt&&(wt=0,he&&(he.unmount(),he=i))},HIGH:1e3,LOW:-1e3,attach:Q,detach:G,mix:S,toMap:(e,t)=>{let a,i={};if(e)for(a of e)i[t&&a?a[t]:a]=t?a:1+(0|i[a]);return i},toTry:V,toUrl:(e,a,i)=>{let l,r,n,s=[];for(r in a)l=a[r]+t,(l||P(i,r))&&(l=b(l),s.push(n=r+"="+l));return n&&(e+=(e&&(e.includes("?")?"&":"?"))+s.join("&")),e},parseUrl:re,guid:x,use:me,dispatch:(e,t,a)=>{let i=new Event(t,W);S(i,a),e.dispatchEvent(i)},guard:fe,type:D,has:P,inside:I,applyStyle:O,Cache:R,View:vt,Vframe:Me,Event:ke,mark:(e,t,a,i,l)=>(0!=e[l="\x1ebc"]&&(a=e[l]||(e[l]={}),P(a,t)||(a[t]=0),i=++a[t]),a=>(a=e[l])&&i===a[t]),unmark:j,node:v,task:ce,lowTask:de,taskFinale:()=>new r(ce),lowTaskFinale:()=>new r(de),delay:e=>new r((t=>s(t,e)))}})),(()=>{let e,t=document.currentScript.src.replace(/\/[^\/]+$/,"/"),a=/(?:\r\n|\r|\n)/g,i={"&":38,"<":60,">":62,'"':34,"'":39,"`":96},l=/[&<>"'\`]/g,r=e=>`&#${i[e]};`,n=/\s/g,s=e=>(null==e?e="":e+="",e.replace(l,r).replace(a,"<br/>").replace(n,"&nbsp;")),b=(e,t,a,i)=>{b._bN||(b._bN=1,e.merge({ctor(){this.set({i18n:i,textReturn:s})},_bO(e,i){i=i||6;let l,r=t("dm_"),n=this;return(...t)=>{clearTimeout(l);let s=a(n,r);l=setTimeout((()=>{s()&&e.apply(this,t)}),i)}},_bP(e){e.preventDefault()},"_bQ<contextmenu>&{passive:false}"(e){this._bP(e)}}))};window.MTalk={resolve:e=>seajs.realpath(t+e),setup:(t={})=>(e=0,new Promise((a=>{seajs.use(["magix5","i18n/index","data/index","data/service"],(({applyStyle:i,config:l,parseUrl:r,View:n,guid:s,mark:o,node:c,boot:d},m,f,h)=>{let{MTalk:g}=window;g.Talk=f,g.Service=h,i("mtalk-bc",'@font-face{font-family:mtalk-bc;src:url(//at.alicdn.com/t/font_2909827_60jfdh730d.woff2?t=1636328957897) format("woff2"),url(//at.alicdn.com/t/font_2909827_60jfdh730d.woff?t=1636328957897) format("woff"),url(//at.alicdn.com/t/font_2909827_60jfdh730d.ttf?t=1636328957897) format("truetype")}.mtalk-bc{display:inline-block;font:400 normal normal 14px/1 mtalk-bc;font-display:fallback;position:relative}.mtalk-bd{all:initial;box-sizing:border-box;display:block;font-family:Arial,sans-serif;font-size:14px;line-height:1.5}.mtalk-bd *,.mtalk-bd :after,.mtalk-bd :before{box-sizing:inherit}.mtalk-bd ::-moz-placeholder{color:#999}.mtalk-bd :-ms-input-placeholder{color:#999}.mtalk-bd ::placeholder{color:#999}.mtalk-bd ::-moz-selection{background:rgba(250,116,43,.2)}.mtalk-bd ::selection{background:rgba(250,116,43,.2)}.mtalk-be *{cursor:inherit!important}.mtalk-bf{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mtalk-bg{position:fixed}.mtalk-bh{position:absolute}.mtalk-bi{position:relative}.mtalk-bj{overflow:auto}.mtalk-bk{overflow:hidden}.mtalk-bl{left:0}.mtalk-bm{top:0}.mtalk-bn{right:0}.mtalk-bo{inset:0}.mtalk-bp{pointer-events:none}.mtalk-bq{pointer-events:all}.mtalk-br{direction:ltr}.mtalk-bs{direction:rtl}.mtalk-bt{display:flex}.mtalk-bu{display:inline-flex}.mtalk-bv{display:none}.mtalk-bw{align-items:center}.mtalk-bx{justify-content:center}.mtalk-by{cursor:pointer}.mtalk-bz{cursor:default}.mtalk-bA{cursor:not-allowed}.mtalk-bB{font-size:16px}.mtalk-bC{font-size:12px}.mtalk-bD{font-size:10px}.mtalk-bE{font-size:24px}.mtalk-bF{font-size:18px}.mtalk-bG{line-height:normal}.mtalk-bH{align-items:flex-end}.mtalk-bI{flex:1}.mtalk-bJ{flex-direction:column}.mtalk-bK{height:100%}.mtalk-bL{color:#666}.mtalk-bM{color:#999}.mtalk-bN{color:#fa742b}.mtalk-bN:hover{color:#ec5706}.mtalk-bO{text-align:center}.mtalk-bP{border-radius:2px}.mtalk-bQ{background:#fff}.mtalk-bR{background:#f9f9f9}.mtalk-bS{box-shadow:0 0 8px 0 #0004}.mtalk-bT{-ms-scroll-chaining:none;overscroll-behavior:contain;scrollbar-color:#fa742b #0000}.mtalk-bT::-webkit-scrollbar,.mtalk-bT::-webkit-scrollbar-corner{height:4px;width:4px}.mtalk-bT::-webkit-scrollbar-thumb{background:#fa742b;border-radius:2px}.mtalk-bT::-webkit-scrollbar-thumb:hover{background:#ec5706}.mtalk-bU{scroll-behavior:smooth;scrollbar-width:thin}.mtalk-bU::-webkit-scrollbar,.mtalk-bU::-webkit-scrollbar-corner{height:2px;width:2px}.mtalk-bV{display:none}.mtalk-bW{word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mtalk-bX{white-space:nowrap;word-break:keep-all}.mtalk-bY{word-break:break-all}.mtalk-bZ{scroll-behavior:unset}');let k=navigator.language.toLowerCase();try{let e=localStorage;e&&(k=e.getItem("im.lang")||k)}catch(e){}let{params:p}=r(location.href);p.lang&&(k=p.lang),l(t,{lang:k});let u=t.rootId||"app";if(e)return;let{classList:x}=c(u);x.add("mtalk-bd"),b(n,s,o,m),d({defaultPath:"/talk",defaultView:"ui/index",rootId:u,error(e){setTimeout((()=>{throw e}),0)}}),a()}))}))),destroy(){e=1;let t=seajs.require("magix5");if(t){let{unboot:e}=t;e()}}}})(),define("gallery/mx-monitor/index",["magix5"],((e,t,a)=>{let i=e("magix5"),{attach:l,detach:r}=i,n=0,s=[],b=["pointerdown","keyup","keydown"],o=document,c=window,d={capture:!1,passive:!0},m=e=>{for(let t=s.length;t--;){let a=s[t];if(a._br)s.splice(t,1);else{let t=a._bs;"resize"!=e.type&&"blur"!=e.type&&t._bt(e.target)||t._bu()}}},f=e=>{let t=s[e.id];t&&(t._br=1,delete s[e.id])};a.exports={_bv(e){f(e);let t={_bs:e};s.push(t),s[e.id]=t},_bw:f,_bx(){if(!n){for(let e of b)l(o,e,m,d);l(c,"resize",m,d),l(c,"blur",m,d),l(c,"scroll",m,d)}n++},_by(){if(n>0&&(n--,!n)){for(let e of b)r(o,e,m,d);r(c,"resize",m,d),r(c,"blur",m,d),r(c,"scroll",m,d)}}}})),define("gallery/mx-dragdrop/index",["magix5"],((e,t,a)=>{let i=e("magix5"),{attach:l,detach:r}=i,n=window,s=document,b=n.getComputedStyle,o=e=>{(e=n.getSelection)&&e().removeAllRanges()},c=e=>e.preventDefault(),d=["pointermove"],m=["pointerup","pointercancel"],f=["keydown","wheel","fullscreenchange","selectstart"],h={passive:!1};a.exports={ctor(){let e=this;e.on("destroy",(()=>{e._bi()}))},_bi(e){let t=this;if(t._bj){let a;for(a of d)r(s,a,t._bj);for(a of m)r(s,a,t._bk);for(a of f)r(s,a,c);r(n,"blur",t._bk),delete t._bj;let i=t._bl;i&&i(e)}},_bm(e,t,a){let i=this;if(i._bi(),e){let e;for(e of(o(),i._bl=a,i._bk=i._bi.bind(i),i._bj=e=>{t&&t(e)},d))l(s,e,i._bj);for(e of m)l(s,e,i._bk);for(e of f)l(s,e,c,h);l(n,"blur",i._bk)}},_bp(e,t){let a;if(s.elementFromPoint)for(!c._bn&&b&&(c._bn=1,c._bo=null!==s.elementFromPoint(-1,-1)),c._bo&&(e+=scrollX,t+=scrollY),a=s.elementFromPoint(e,t);a&&3==a.nodeType;)a=a.parentNode;return a},_bq:o}})),define("gallery/mx-pointer/cursor",[],((e,t,a)=>{let i,l=document.body,r=l.style,n=l.classList,s="mtalk-be";a.exports={_bA(e){let t=getComputedStyle(e);this._bz(t.cursor)},_bz(e){i=getComputedStyle(l).cursor,r.cursor=e,n.add(s)},_bu(){r.cursor=i,n.remove(s)}}})),define("i18n/index",["magix5","./zh-cn"],((e,t,a)=>{let i=e("magix5"),l=e("./zh-cn"),r={"zh-cn":l,zh:l},{has:n,config:s,Cache:b}=i,o=/\{(\d+)\}/g,c=new b(200,60);a.exports=(e,...t)=>{let a=(s("lang")||navigator.language).toLowerCase();n(r,a)||(a="zh");let i=r[a],l=[a,e,...t].join("\0");if(c.has(l))return c.get(l);let b=n(i,e)?i[e]:e;return t.length&&(b=b.replace(o,((e,a,l)=>(a|=0,t.length>a?(l=t[a],n(i,l)?i[l]:l):e)))),c.set(l,b),b}})),define("i18n/zh-cn",[],((e,t,a)=>{a.exports={bc:"Magix Talk",bd:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9ad8\u5ea6",be:"\u6700\u5c0f\u5316\u9762\u677f",bf:"\u6700\u5927\u5316\u9762\u677f",bg:"\u5173\u95ed\u5f53\u524d\u804a\u5929\u7a97\u53e3(\u70b9\u51fb\u65f6,\u6309\u4e0bshift\u952e\u5219\u5173\u95ed\u6240\u6709\u804a\u5929\u7a97\u53e3)",bh:"\u91cd\u8bd5",bi:"\u70b9\u51fb\u91cd\u65b0\u521d\u59cb\u5316",bj:"\u70b9\u51fb\u67e5\u770b\u597d\u53cb\u5217\u8868",bk:"\u70b9\u51fb\u67e5\u770b\u7fa4\u5217\u8868",bl:"\u70b9\u51fb\u67e5\u770b\u6700\u8fd1\u8054\u7cfb\u5217\u8868",bm:"\u53d1\u9001\u5931\u8d25",bn:"\u53d1\u9001\u4e2d",bo:"\u70b9\u51fb\u91cd\u65b0\u53d1\u9001\u6d88\u606f"}})),define("data/cache",["magix5"],((e,t,a)=>{let i=e("magix5"),{has:l}=i,r={};a.exports={bc:e=>r[e],bd:e=>l(r,e),be(e,t){r[e]=t},bf:e=>delete r[e],bg(){r={}}}})),define("data/config",[],((e,t,a)=>{a.exports={bc:2e3,bd:300,be:99}})),define("data/index",["magix5","./cache","./service","./config"],((e,t,a)=>{let i,l=e("magix5"),r=e("./cache"),n=e("./service"),s=e("./config"),{mix:b,Event:o,has:c,toMap:d,toTry:m,guid:f}=l,h="bc",g="bd",k="be",p="bf",u="bg",x="bh",v="bi",w="bj",y="bk",_="bl",M="bm",T="bn",I="bo",j=[],S=e=>{let t,a={},i=[],l=[];if(e){let n=r.bc(k),b=r.bc(p),o=r.bc(u),c=r.bc(M),d=r.bc(T),m=r.bc(w);b||r.be(p,b={}),o||r.be(u,o={}),d||r.be(T,d={});for(let r of e){let e,f=r.channel;if(a[f]=1,d[f]=r.content,l.includes(f)||l.push(f),c[f]||i.includes(f)||i.push(f),f!=n){let a=1;r.from==m.id&&(a=0),e=(0|b[f])+a,e>s.be&&(e=s.be),e>0&&b[f]!==e&&(b[f]=e,t=1)}let h=o[f];h||(o[f]=h=[]),h.push(r),h.length>s.bd&&h.shift()}}return{_bc:t,_bd:a,_be:i,_bf:l}},A=e=>{r.be(v,e);let t=d(e,"id"),a=r.bc(h);a||r.be(h,a={}),b(a,t),r.be(M,t)},z=e=>{let t,a,i=r.bc(g);i||r.be(g,i=[]);let l=r.bc(p);if(l&&l[e]&&(a=1,delete l[e]),i.includes(e)){r.bc(k)!=e&&(r.be(k,e),t=1)}else r.be(k,e),i.push(e),t=1;return{_bg:t,_bc:a}},$=(e,t)=>{let a,i=r.bc(x);if(i){let l=i.length;if(i[l-1]!=e){if(t){for(let t=l;t--;)if(i[t]==e){i.splice(t,1);break}i.push(e),a=1}else i.includes(e)||(a=1,i.push(e));i.length>s.bc&&i.shift()}}return a},C=()=>{let e,t=r.bc(g);if(t&&t.length){e=1,r.be(k,null);let a=r.bc(I);if(a)for(let e of t)delete a[e];t.length=0}return e},D=e=>{let t;if(e){t=e.pop();let a=r.bc(g);if(a){for(let t of e)a.includes(t)||a.push(t);a.includes(t)&&(t=null)}}return t};a.exports=b({getBasic:()=>r.bc(y),retryBasic(){r.be(y,null),this.fire("basic.changed"),n.qeuryBasic()},getCurrent:()=>r.bc(w),getFriends(){let e=r.bc(v),t=[];if(e)for(let a of e)a.group||t.push(a);return t},getGroups(){let e=r.bc(v),t=[];if(e)for(let a of e)a.group&&t.push(a);return t},getRecents:()=>r.bc(x),getTargetsMap:()=>r.bc(M),getLatest:()=>r.bc(T),translateTargets(e){let t=r.bc(h);return new Promise((a=>{let i={bc(){let l,r=[];for(let a of e){if(!c(t,a)){l=1;break}r.push(t[a])}l||(i.bd=1,queueMicrotask((()=>{a(r)})))}},l=[];for(let a of e)c(t,a)||l.push(a);l.length?(j.push(i),n.qeuryTargets(l)):i.bc()}))},getOpened:()=>r.bc(g),getActive:()=>r.bc(k),getActiveInfo(){let e=r.bc(k),t=r.bc(M);return t&&t[e]},getUnread:()=>r.bc(p),getMessagesById(e){let t=r.bc(u);return t&&t[e]},getDraft(e){let t=r.bc(I);if(t)return t[e]},saveDraft(e,t){let a=r.bc(I);a||r.be(I,a={}),a[e]=t},clearDraft(e){let t=r.bc(I);t&&delete t[e]},open(...e){let t,a;for(let i of e){let{_bg:e,_bc:l}=z(i);t=e||t,a=l||a}a&&this.fire("unread.changed"),t&&this.fire("active.changed")},close(e){let t=r.bc(g);if(t){let a=r.bc(k);for(let a=t.length;a--;)if(t[a]==e){t.splice(a,1);break}if(a==e){let e=t[t.length-1],a=r.bc(p);a&&a[e]&&delete a[e],r.be(k,e),this.fire("active.changed")}else this.fire("opened.changed")}let a=r.bc(I);a&&delete a[e]},closeAll(){C()&&this.fire("active.changed")},getSendingMessages(e){let t=r.bc(_);return t&&t[e]},sendMessage(e,t){let a=r.bc(w);if(a){t.from=a.id,t.id=f(a.id+"_smsg_"),t.to=e;let i=r.bc(_);i||r.be(_,i={}),i[e]||(i[e]=[]),i[e].push(t),this.fire("message.send",{targetId:e}),$(e,1)&&this.fire("recents.changed"),n.send(e,t)}},resendMessage(e,t){let a=r.bc(_),i=a&&a[e];if(i)for(let e=i.length;e--;){if(i[e].id==t.id){i.splice(e,1);break}}delete t.failed,this.sendMessage(e,t)},changeTargets(e){A(e),this.fire("targets.changed")},incomeMessages(e){let t,{_bc:a,_bd:i,_be:l,_bf:r}=S(e);for(let e of r)t=$(e,1)||t;let n=D(l);n&&(z(n),this.fire("active.changed")),a&&this.fire("unread.changed"),t&&this.fire("recents.changed"),this.fire("message.income",{ids:i})},setup(){if(!i){i=1;let e=({error:e=null,data:t={}})=>{if(i){r.bf(h),r.be(y,{error:e}),r.be(w,t.current),r.be(x,t.recents),A(t.targets);let{_be:a}=S(t.records),i=D(a);i&&z(i),this.fire("basic.changed")}},t=({data:e=[]})=>{i&&this.incomeMessages(e)},a=({data:e={}})=>{i&&this.changeTargets(e.targets)},l=({error:e,data:t,targetIds:a})=>{if(i){let i=r.bc(h);if(i){let l=e?null:d(t,"id");for(let t of a)i[t]=c(l,t)?l[t]:{id:t,error:e||`can not found: ${t}`};(()=>{for(let e=j.length;e--;){let t=j[e];m(t.bc),t.bd&&j.splice(e,1)}})()}}},s=({targetId:e,failed:t,messageId:a})=>{if(i){let i=r.bc(_),l=i&&i[e];if(l){for(let e=l.length;e--;){let i=l[e];if(i.id==a){t?i.failed=1:l.splice(e,1);break}}this.fire("message.sent",{targetId:e})}}},b=({error:e})=>{i&&(C()&&this.fire("active.changed"),r.bf(h),r.be(y,{error:e}),this.fire("basic.changed"))};n.on("bc",e),n.on("bd",t),n.on("be",a),n.on("bf",l),n.on("bg",s),n.on("bh",b),n.qeuryBasic(),this.on("destroy",(()=>{i=0,n.off("bc",e),n.off("bd",t),n.off("be",a),n.off("bf",l),n.off("bg",s),n.off("bh",b),n.destroy(),r.bg(),this.off("destroy")}))}}},o)})),define("data/service",["magix5","./source"],((e,t,a)=>{let i,l=e("magix5"),r=e("./source"),{mix:n,Event:s,has:b,delay:o}=l,c={},d=5e3;a.exports=n({async qeuryBasic(){await o(600);let e=r.simlateBasicData();e.error?this.fire("bc",{error:e.error}):(this.fire("bc",{data:e.data}),(async e=>{if(!i)for(i=1;i;){let t=Math.random()*d;await o(t);let a=r.simlateIncomeMessages();e.fire("bd",{data:a})}})(this))},async qeuryTargets(e){let t=[];for(let a of e)b(c,a)||t.push(a);if(t.length){for(let e of t)c[e]=1;try{await o(1200),this.fire("bf",{error:null,data:[],targetIds:t});for(let e of t)delete c[e]}catch(e){this.fire("bf",{error:e.message,targetIds:t});for(let e of t)delete c[e]}}},updateTargets(e,t){let a=r.simlateTargets(e,t);this.fire("be",{data:{targets:a}})},destroy(){for(let e in c)delete c[e]},crash(){i&&(i=0),this.fire("bh",{error:"mock application crash"})},updateIncomeMessagesSpeed(e){d=e},send(e,t){let a=Math.random()<.2,i=1500*Math.random();setTimeout((()=>{a||this.fire("bd",{data:[{channel:e,type:t.type,from:t.from,content:t.content,timestamp:Date.now()}]}),this.fire("bg",{targetId:e,failed:a,messageId:t.id})}),i)}},s)})),define("data/source",[],((e,t,a)=>{let i,l={id:"user-@natural(1,1000000)",name:"@cname",state:1,comment:"@csentence","avatar|1":["//iconfont.alicdn.com/t/79a6c7ad-2f34-41ac-ae11-2214115acc9d.png","//iconfont.alicdn.com/t/c03057a7-90b4-498e-a2d9-d1dfde3538cf.png","//iconfont.alicdn.com/t/093d3a61-8cd2-4979-b5f1-eb81b9e4d1a8.png","//iconfont.alicdn.com/t/e8ee4367-b326-4cae-b3a1-dc43c9722cbe.png","//iconfont.alicdn.com/t/3dad299d-d99a-415f-9af8-99d4903c58e4.png","//iconfont.alicdn.com/t/151aec7a-6b0a-42f8-ab57-a6318847eab5.png","//iconfont.alicdn.com/t/436637ba-1975-472a-8869-7feefaab6bd2.png","//iconfont.alicdn.com/t/d1cad905-0993-4ce6-81fa-3c0ce9797f3e.png","//iconfont.alicdn.com/t/0d4d23d4-d854-48a6-92d2-8b58fcf286ac.png","//iconfont.alicdn.com/t/5ce6b2cb-fb35-4a0e-bbb5-5b403e05c8e4.png","//iconfont.alicdn.com/t/35e2d507-e65f-45cf-bbb9-dfd9d73c957a.png","//iconfont.alicdn.com/t/67f099f4-74a7-40a0-baba-ca0d457b3f0e.png"]},r={id:"group-@natural(1,1000000)",name:"@ctitle",group:!0,"avatar|1":["//iconfont.alicdn.com/t/8d8c50f9-879e-44fe-bd05-5f2a06e2b581.png","//iconfont.alicdn.com/t/20642f38-be52-48a1-bcb5-ff646289643c.png","//iconfont.alicdn.com/t/ec3e7933-f665-4462-8ad6-2486ad6556dd.png","//iconfont.alicdn.com/t/cd5a1b05-b355-4410-8ca6-789c1d312c5e.png","//iconfont.alicdn.com/t/6d04051c-3173-4662-9d52-b215dc87853a.png","//iconfont.alicdn.com/t/18996e62-aaef-46b6-91c4-39595b337c56.png","//iconfont.alicdn.com/t/2b732f69-6a78-4e3e-bca8-af41dee1912f.png","//iconfont.alicdn.com/t/2a6a0ff6-a1ec-49bd-9802-a71fdfed640a.png","//iconfont.alicdn.com/t/b9b8aca7-b64c-4119-be02-5b6560aca3db.png","//iconfont.alicdn.com/t/e05882ac-c416-44d2-a78d-e5ff5118300e.png","//iconfont.alicdn.com/t/7c144321-f8d8-47ab-8290-42d9b6edd3a1.png","//iconfont.alicdn.com/t/1969cd53-0e3e-4538-a6c4-ea66336cc35d.png"]},n=Mock.mock(l),s=(e="10-20",t="10-20")=>{i=Mock.mock({[`array|${e}`]:[l]}).array.concat(Mock.mock({[`array|${t}`]:[r]}).array)};s();let b=()=>{let e=[],t=Math.floor(Math.random()*i.length);for(let a=0;a<t;a++){let t=Math.floor(Math.random()*i.length);e.includes(i[t].id)||e.push(i[t].id)}return e.push("g404"),e},o=()=>{let e=[],t=Math.floor(10*Math.random());for(let a=0;a<t;a++){let t=Math.floor(Math.random()*i.length),a=i[t];e.push({id:"msg-"+Mock.mock("@natural(1,100000000000)"),channel:a.id,from:a.id,type:"text",name:a.group?Mock.mock("@name"):a.name,avatar:a.avatar,content:Mock.mock("@csentence"),timestamp:new Date(Mock.mock("@datetime")).getTime()})}return e};a.exports={simlateBasicData:()=>Math.random()<.1?{error:"\u8fd9\u662f\u6a21\u62df\u521d\u59cb\u5316\u5931\u8d25\u7684\u60c5\u51b5"}:{error:null,data:{current:n,targets:i,recents:b(),records:o()}},simlateTargets:(e,t)=>(s(e,t),i),simlateIncomeMessages:o}})),define("ui/chat-display-image",[],(()=>{})),define("ui/chat-display",["magix5","../data/index"],((e,t,a)=>{let i,l,r={class:"mtalk-bJ mtalk-bt mtalk-cv"},n={class:"mtalk-bJ mtalk-bt mtalk-cw"},s={class:"mtalk-bD mtalk-bM mtalk-bt mtalk-cA"},b={class:"mtalk-bI mtalk-bY mtalk-cy mtalk-cz"},o={class:"mtalk-bt mtalk-bw mtalk-bx mtalk-cC"},c=e("magix5"),d=e("../data/index"),{View:m,mark:f}=c,h=e=>{let t=new Date,a=new Date(e),i=[];t.getFullYear()!=a.getFullYear()?i.push(a.getFullYear(),(a.getMonth()+1).toString().padStart(2,"0"),a.getDate().toString().padStart(2,"0")):t.getMonth()==a.getMonth()&&t.getDate()==a.getDate()||i.push((a.getMonth()+1).toString().padStart(2,"0"),a.getDate().toString().padStart(2,"0"));let l=[a.getHours().toString().padStart(2,"0"),a.getMinutes().toString().padStart(2,"0"),a.getSeconds().toString().padStart(2,"0")];return(i.length?i.join("-")+" ":"")+l.join(":")};a.exports=m.extend({tmpl:(e,t,a,c,d,m)=>{let f,h,g,k,p,u,x=[],{messages:v,current:w,active:y,time:_,textReturn:M,sendings:T,i18n:I}=e;if(v)for(let e=v.length,a=0;a<e;a+=1){let e=v[a];f="mtalk-ch",e.from==w.id&&(f+=" mtalk-cB"),p=[t("div",{style:"background-image:url("+(e.from==w.id?w.avatar:e.avatar)+")",class:f})],g=[];let i=y.group&&e.from!=w.id;i&&g.push(t(0,e.name)),h=[t(0,_(e.timestamp))],g.push(t("span",{class:i&&"mtalk-b0"},h)),f="mtalk-bD mtalk-bM mtalk-bt",e.from==w.id&&(f+=" mtalk-cA"),k=[t("div",{class:f},g)],g=[t(0,M(e.content),1)],f="mtalk-cy mtalk-bY",e.from==w.id&&(f+=" mtalk-cz"),k.push(t("div",{class:f},g)),p.push(t("div",r,k)),f="mtalk-bt mtalk-cx",e.from==w.id&&(f+=" mtalk-cA"),x.push(t("div",{"#":"bc aT "+e.id,class:f},p))}if(T)for(let e=T.length,r=0;r<e;r+=1){let e=T[r];p=[t("div",{class:"mtalk-cB mtalk-ch",style:"background-image:url("+w.avatar+")"})],g=[t(0,I(e.failed?"bm":"bn"))],k=[t("div",s,g)],h=[t(0,M(e.content),1)],g=[t("div",b,h)],h=[],e.failed?i?h.push(i):(u=[t(0,"\ue6b3")],h.push(i=t("i",{_:"aT",class:"mtalk-bc mtalk-cD"},u))):l?h.push(l):(u=[t(0,"\ue65d")],h.push(l=t("i",{_:"aU",class:"mtalk-bc mtalk-cE"},u))),g.push(t("div",o,h)),f="mtalk-bu mtalk-cA",e.failed&&(f+=" mtalk-by"),k.push(t("div",{title:e.failed&&I("bo"),"mx5-click":e.failed&&a+"\x1e_bS({message:'"+m(d,e,"aT."+r+".aU")+"'})",class:f},g)),p.push(t("div",n,k)),x.push(t("div",{"#":"bc aU "+e.id,class:"mtalk-bt mtalk-cA mtalk-cx"},p))}return t(a,0,x)},init(){let e=this._bO(this.render),t=t=>{let a=d.getActive();t.targetId==a&&e(t)};d.on("active.changed",e),d.on("message.income",e),d.on("message.sent",t),d.on("message.send",t),this.on("destroy",(()=>{d.off("active.changed",e),d.off("message.income",e),d.off("message.sent",t),d.off("message.send",t)})),this.set({time:h})},async render(e){let t=d.getActive();if(!e||!e.ids||e.ids[t]){let a=d.getMessagesById(t),i=d.getSendingMessages(t),l=d.getCurrent(),r=d.getActiveInfo(),n=f(this,"_bR"),{root:s}=this,b=s.scrollHeight-s.scrollTop-9<=s.clientHeight;await this.digest({active:r,current:l,messages:a,sendings:i}),n()&&(!e||"active.changed"==e.type||"message.send"==e.type&&e.targetId==t||e&&"message.income"==e.type&&e.ids[t]&&b)&&(s.scrollTop=s.scrollHeight)}},"_bS<click>"({params:e}){let{message:t}=e;d.resendMessage(t.to,t)}})})),define("ui/chat-sender-emoji",["magix5","../gallery/mx-monitor/index"],((e,t,a)=>{let i,l={class:"mtalk-bK mtalk-bT mtalk-bU mtalk-bi mtalk-bj mtalk-bw mtalk-bx mtalk-cr"},r=e("magix5"),n=e("../gallery/mx-monitor/index"),{View:s,dispatch:b,node:o,inside:c}=r;a.exports=s.extend({tmpl:(e,t,a)=>{let r,n,s,b;s=[];for(let e=128513;e<128592;e++)n=[t(0,String.fromCodePoint(e))],s.push(t("span",{class:"mtalk-bu mtalk-bw mtalk-bx mtalk-bz mtalk-cs","mx5-click":a+"\x1e_bM()"},n));return b=[t("div",l,s)],r=[t("div",{id:"faces_"+a,class:"mtalk-bV mtalk-bf mtalk-bh mtalk-cq"},b)],b=[i||(i=t(0,"\ue681"))],r.push(t("i",{class:"mtalk-b7 mtalk-bF mtalk-bc mtalk-bu mtalk-bw mtalk-bx","mx5-click":a+"\x1e_bT()"},b)),t(a,0,r)},init(){n._bx(),this.on("destroy",(()=>{n._bw(this),n._by()}))},render(){this.digest()},_bt(e){return c(e,this.root)},_bu(){let e=o(`faces_${this.id}`),{classList:t}=e;t.contains("mtalk-bV")||(t.add("mtalk-bV"),n._bw(this))},"_bT<click>"(){let e=o(`faces_${this.id}`),{classList:t}=e;t.contains("mtalk-bV")?(t.remove("mtalk-bV"),n._bv(this)):(t.add("mtalk-bV"),n._bw(this))},"_bM<click>"({eventTarget:e}){let t=e.innerHTML;b(this.root,"pick",{face:t})}})})),define("ui/chat-sender",["magix5","../data/index","./chat-sender-emoji"],((e,t,a)=>{let i;e("./chat-sender-emoji");let l={class:"mtalk-bQ mtalk-bi mtalk-ct"},r={value:"value"},n=e("magix5"),s=e("../data/index"),{View:b,node:o,delay:c,mark:d}=n;a.exports=b.extend({tmpl:(e,t,a)=>{let n,s,{msg:b}=e;return s=[t("div",{"mx5-owner":a,class:"mtalk-bi mtalk-bt mtalk-bw","mx5-view":"ui/chat-sender-emoji","mx5-pick":a+"\x1e_bX()"})],i?s.push(i):s.push(i=t("div",{_:"aT",class:"mtalk-bI"})),n=[t("div",{class:"mtalk-bf mtalk-bt mtalk-cp","mx5-contextmeni":a+"\x1e_bQ()"},s)],s=[t("textarea",{class:"mtalk-bT mtalk-bU mtalk-bh mtalk-bo mtalk-cu",placeholder:"\u56de\u8f66\u53d1\u9001\u6d88\u606f\uff0cshift+\u56de\u8f66\u6362\u884c","mx5-keydown":a+"\x1e_bV()","mx5-input":a+"\x1e_bU()","mx5-keyup":a+"\x1e_bW()","mx5-focusin":a+"\x1e_bW()","mx5-pointerup":a+"\x1e_bW()",id:"textarea_"+a,value:b},0,r)],n.push(t("div",l,s)),t(a,0,n)},init(){let e=this.render.bind(this);s.on("active.changed",e),this.on("destroy",(()=>{s.off("active.changed",e)}))},async render(){let e=d(this,"_bR"),t=s.getDraft(s.getActive());await this.digest({msg:t&&t.content||""}),await c(0);let a=o(`textarea_${this.id}`);e()&&(t&&(a.selectionStart=t.start,a.selectionEnd=t.end),a.focus())},"_bU<input>"(e){let t=s.getActive(),a=e.eventTarget,i=a.value;this.set({msg:i}),s.saveDraft(t,{content:i,start:a.selectionStart,end:a.selectionEnd})},"_bV<keydown>&{passive:false}"(e){let t=s.getActive(),a=e.eventTarget.value;"Enter"!=e.key||e.shiftKey||(this._bP(e),a&&(s.sendMessage(t,{type:"text",content:a}),s.clearDraft(t),this.digest({msg:""})))},async"_bW<focusin,keyup,pointerup>"(e){let t=d(this,"_bW");await c(0);let a=s.getDraft(s.getActive());if(t()&&a){let t=e.eventTarget,{selectionStart:i,selectionEnd:l}=t;a.start=i,a.end=l}},"_bX<pick>"(e){let t=o(`textarea_${this.id}`),a=s.getDraft(s.getActive()),{value:i}=t,l=Array.from(i),r=l.length,n=r;if(a){let e=a.start,t=a.end,i=0,s=0;for(let a of l){if(i==e&&(n=s),i==t){r=s;break}i+=a.length,s++}}let b=l.slice(0,n).join("")+e.face,c=b.length;t.value=b+l.slice(r).join(""),t.selectionStart=c,t.selectionEnd=c,t.focus(),this["_bU<input>"]({eventTarget:t})}})})),define("ui/chat-window",["magix5","../data/index","./chat-display","./chat-sender"],((e,t,a)=>{let i;e("./chat-display"),e("./chat-sender");let l={class:"mtalk-bt mtalk-bw mtalk-cm"},r={class:"mtalk-bH mtalk-bI mtalk-bk mtalk-bt"},n={class:"mtalk-bG mtalk-bX"},s={class:"mtalk-b0 mtalk-bC mtalk-bM mtalk-bW"},b=e("magix5"),o=e("../data/index"),{View:c}=b;a.exports=c.extend({tmpl:(e,t,a)=>{let b,o,c,d,{active:m,i18n:f}=e;return c=[],m&&(o=[t(0,m.name)],c.push(t("span",n,o)),m.group||(o=[t(0,m.comment)],c.push(t("span",s,o)))),d=[t("div",r,c)],c=[i||(i=t(0,"\ue652"))],d.push(t("i",{class:"mtalk-b7 mtalk-bP mtalk-bc mtalk-bf mtalk-bt mtalk-bw mtalk-bx mtalk-bz",title:f("bg"),"mx5-click":a+"\x1e_bY()"},c)),b=[t("div",l,d),t("div",{"mx5-owner":a,"mx5-view":"ui/chat-display",class:"mtalk-bQ mtalk-bT mtalk-bU mtalk-bZ mtalk-bj mtalk-cn"}),t("div",{"mx5-owner":a,"mx5-view":"ui/chat-sender",class:"mtalk-bJ mtalk-bt mtalk-co"})],t(a,0,b)},init(){let e=this._bO(this.render);o.on("active.changed",e),this.on("destroy",(()=>{o.off("active.changed",e)}))},render(){let e=o.getActiveInfo();this.digest({active:e})},"_bY<click>"(e){let{shiftKey:t}=e;if(t)o.closeAll();else{let e=o.getActive();o.close(e)}}})})),define("ui/chat",["magix5","../data/index","./chat-window"],((e,t,a)=>{e("./chat-window");let i={class:"mtalk-bL mtalk-bP mtalk-bR mtalk-bS mtalk-bk mtalk-bq mtalk-bt mtalk-cj"},l={class:"mtalk-bI mtalk-bJ mtalk-bk mtalk-bu"},r={class:"mtalk-bC mtalk-bO mtalk-ci"},n=e("magix5"),s=e("../data/index"),{View:b,mark:o,node:c,delay:d}=n;a.exports=b.extend({tmpl:(e,t,a,n,s,b,o)=>{let c,d,m,f,h,g,k=[],{opened:p,active:u,getDraft:x,latest:v,unread:w}=e;if(p&&p.length){h=[];for(let e=p.length;e--;){let i=p[e];if(f=[],f.push(t("div",{class:"mtalk-ch",style:"background-image:url("+i.avatar+")"})),m=[],d=[t(0,i.name)],m.push(t("div",0,d)),i.id!=u){let e=x(i.id);e=e?`[\u8349\u7a3f:${e.content}]`:v&&v[i.id],e&&(d=[t(0,e)],m.push(t("div",{class:"mtalk-bC mtalk-bM mtalk-bW",title:e},d)))}f.push(t("div",l,m));let n=w&&w[i.id];n&&(m=[t(0,n)],f.push(t("div",r,m))),c="mtalk-bt mtalk-b8 mtalk-bw mtalk-br",u==i.id&&(c+=" mtalk-cl"),h.push(t("div",{id:"user_"+i.id+"_"+a,"mx5-click":a+"\x1e_bZ({id:'"+o(i.id)+"'})",title:i.name,class:c},f))}g=[t("div",{class:"mtalk-bT mtalk-bU mtalk-bf mtalk-bj mtalk-bs mtalk-bz mtalk-ck","mx5-contextmenu":a+"\x1e_bQ()"},h),t("div",{"mx5-owner":a,class:"mtalk-bI mtalk-bk","mx5-view":"ui/chat-window"})],k.push(t("div",i,g))}return t(a,0,k)},init(){let e=this._bO(this.render);s.on("unread.changed",e),s.on("active.changed",e),s.on("opened.changed",e),this.on("destroy",(()=>{s.off("unread.changed",e),s.off("active.changed",e),s.off("opened.changed",e)})),this.set({getDraft:s.getDraft})},async render(e){let t=s.getOpened();if(t){let a=s.getActive(),i=s.getUnread(),l=s.getLatest(),r=o(this,"_bR"),n=await s.translateTargets(t);if(r()&&(await this.digest({latest:l,opened:n,active:a,unread:i}),r()&&(!e||"unread.changed"!=e.type))){await d(0);let e=c(`user_${a}_${this.id}`);e&&r()&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}else this.digest()},"_bY<click>"({params:e}){s.close(e.id)},"_bZ<click>"({params:e}){s.open(e.id)}})})),define("ui/friends",["magix5","../data/index"],((e,t,a)=>{let i={class:"mtalk-bK mtalk-bT mtalk-bU mtalk-bj"},l={class:"mtalk-bI mtalk-bJ mtalk-bk mtalk-bu"},r=e("magix5"),n=e("../data/index"),{View:s}=r;a.exports=s.extend({tmpl:(e,t,a,r,n,s,b)=>{let o,c,d,m,f,{friends:h}=e;f=[];for(let e=h.length,i=0;i<e;i+=1){let e=h[i];m=[t("div",{class:"mtalk-ch",style:"background-image:url("+e.avatar+")"})],c=[t(0,e.name)],d=[t("div",0,c)],c=[t(0,e.comment)],d.push(t("div",{class:"mtalk-bC mtalk-bM mtalk-bW",title:e.comment},c)),m.push(t("div",l,d)),f.push(t("div",{class:"mtalk-b8 mtalk-bt mtalk-bw","mx5-click":a+"\x1e_bZ({id:'"+b(e.id)+"'})",title:e.name},m))}return o=[t("div",i,f)],t(a,0,o)},init(){let e=this._bO(this.render);n.on("targets.changed",e),this.on("destroy",(()=>{n.off("targets.changed",e)}))},async render(){let e=n.getFriends();this.digest({friends:e})},"_bZ<click>"({params:e}){n.open(e.id)}})})),define("ui/groups",["magix5","../data/index"],((e,t,a)=>{let i={class:"mtalk-bK mtalk-bT mtalk-bU mtalk-bj"},l={class:"mtalk-bI mtalk-bJ mtalk-bk mtalk-bu"},r=e("magix5"),n=e("../data/index"),{View:s}=r;a.exports=s.extend({tmpl:(e,t,a,r,n,s,b)=>{let o,c,d,m,{groups:f}=e;m=[];for(let e=f.length,i=0;i<e;i+=1){let e=f[i];d=[t("div",{class:"mtalk-ch",style:"background-image:url("+e.avatar+")"})],c=[t(0,e.name)],d.push(t("div",l,c)),m.push(t("div",{class:"mtalk-b8 mtalk-bt mtalk-bw","mx5-click":a+"\x1e_bZ({id:'"+b(e.id)+"'})",title:e.name},d))}return o=[t("div",i,m)],t(a,0,o)},init(){let e=this._bO(this.render);n.on("targets.changed",e),this.on("destroy",(()=>{n.off("targets.changed",e)}))},async render(){let e=n.getGroups();this.digest({groups:e})},"_bZ<click>"({params:e}){n.open(e.id)}})})),define("ui/index",["magix5","../data/index","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./minotify","./chat"],((e,t,a)=>{let i,l,r,n;e("./minotify"),e("./chat");let s={class:"mtalk-b6 mtalk-bt mtalk-bw"},b={class:"mtalk-b0 mtalk-bI"},o={class:"mtalk-bJ mtalk-bk mtalk-bt mtalk-bw mtalk-bx mtalk-cd"},c={class:"mtalk-bO mtalk-cb"},d={class:"mtalk-bW"},m={class:"mtalk-bt mtalk-bw mtalk-ce"},f={class:"mtalk-bQ mtalk-bk mtalk-ca"},h=e("magix5"),g=e("../data/index"),k=e("../gallery/mx-dragdrop/index"),p=e("../gallery/mx-pointer/cursor"),{View:u,applyStyle:x}=h;x("mtalk-bd",'.mtalk-b0{margin-left:4px}.mtalk-b1{width:240px;z-index:1000}.mtalk-b2{height:4px}.mtalk-b3{border-radius:2px 2px 0 0}.mtalk-b4,.mtalk-b5:hover{background:#fed6c0;cursor:ns-resize}.mtalk-b6{height:28px;padding:0 2px}.mtalk-b7{height:24px;width:24px}.mtalk-b7:hover,.mtalk-b8:hover{background:#fed6c0}.mtalk-b9,.mtalk-b9:hover{background:none;opacity:.4}.mtalk-c_{height:24px;padding:0 6px}.mtalk-ca{height:calc(100% - 88px)}@-webkit-keyframes mtalk-bc{0%{background-position:10px 0}to{background-position:0 0}}@keyframes mtalk-bc{0%{background-position:10px 0}to{background-position:0 0}}.mtalk-cb{width:80%}.mtalk-cc{animation:mtalk-bc .4s linear infinite reverse;background:linear-gradient(45deg,#fa742b 25%,#fff 0,#fff 50%,#fa742b 0,#fa742b 75%,#fff 0,#fff);background-size:10px 10px;height:4px;left:10%;pointer-events:none;top:calc(50% + 14px)}.mtalk-cd{height:calc(100% - 28px)}.mtalk-ce{margin-top:10px}.mtalk-cf{height:26px;opacity:.8}.mtalk-cg,.mtalk-cf:hover{opacity:1}.mtalk-cg:before{background:#fa742b;border-radius:1px;bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.mtalk-b8{height:50px;margin:4px 0;padding:0 8px}.mtalk-ch{background-size:contain;border-radius:50%;flex-shrink:0;height:36px;margin-right:10px;width:36px}.mtalk-ci{background:#fa742b;border-radius:50%;color:#fff;height:18px;line-height:18px;margin-left:4px;width:18px}.mtalk-cj{height:60vh;margin:auto;width:700px;z-index:1001}.mtalk-ck{background:#e9e9e9;flex-shrink:0;padding:0 4px;width:180px}.mtalk-cl,.mtalk-cl:hover{background:#fff}.mtalk-cm{height:28px;padding:0 2px}.mtalk-cn{height:calc(100% - 178px)}.mtalk-co{height:150px}.mtalk-cp{height:28px;padding:0 20px}.mtalk-cq{background:#f9f9f9;border-radius:6px;bottom:calc(100% + 10px);box-shadow:0 2px 8px #0004;height:20vh;left:-7px;padding:2px;width:342px}.mtalk-cq:after{background:#f9f9f9;bottom:-5px;box-shadow:-4px 4px 8px 0 #0003;content:"";display:block;height:10px;left:14px;position:absolute;transform:rotate(315deg);width:10px}.mtalk-cr{background:#f9f9f9;display:grid;font-size:24px;gap:4px;grid-template-columns:repeat(10,1fr);z-index:1}.mtalk-cs{border-radius:4px;height:30px;width:30px}.mtalk-cs:hover{background:#fed6c0}.mtalk-ct{height:calc(100% - 28px)}.mtalk-cu{border:none;font-size:14px;line-height:1.5;outline:none;padding:4px;resize:none;width:100%}.mtalk-cv{min-width:20%}.mtalk-cw{min-width:calc(20% + 28px)}.mtalk-cx{margin:10px 15px}.mtalk-cy{background:#e9e9e9;border-radius:4px;padding:6px}.mtalk-cz{background:#fee6d9}.mtalk-cA{flex-direction:row-reverse}.mtalk-cB{margin:0 0 0 10px}.mtalk-cC{align-self:center;flex-shrink:0;width:28px}.mtalk-cD{color:red;font-size:22px}@-webkit-keyframes mtalk-bd{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes mtalk-bd{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.mtalk-cE{-webkit-animation:mtalk-bd 1s linear infinite;animation:mtalk-bd 1s linear infinite;color:#999;font-size:22px}@-webkit-keyframes mtalk-be{0%{opacity:1}50%{opacity:0}to{opacity:1}}@keyframes mtalk-be{0%{opacity:1}50%{opacity:0}to{opacity:1}}.mtalk-cF{-webkit-animation:mtalk-be .2s infinite;animation:mtalk-be .2s infinite;background:rgba(250,116,43,.6)}');let{max:v}=Math,w=(e,t)=>v(innerHeight-2*t-28,0)*e+28,y=[{id:"bc",icon:"&#xe802;",lang:"bl",view:"ui/recents"},{id:"bd",icon:"&#xe87f;",lang:"bj",view:"ui/friends"},{id:"be",icon:"&#xe611;",lang:"bk",view:"ui/groups"}];a.exports=u.extend({tmpl:(e,t,a,h,g,k,p)=>{let u,x,v,w,y,_,{right:M,bottom:T,height:I,i18n:j,current:S,minHeight:A,maxHeight:z,basic:$,tabs:C,active:D}=e;if(_=[],_.push(t("div",{class:"mtalk-b2 mtalk-b3 mtalk-b5 mtalk-bh mtalk-bl mtalk-bm mtalk-bn",title:j("bd"),"mx5-pointerdown":a+"\x1e_b0()"})),i?y=[i]:(x=[t(0,"\ue600")],y=[i=t("i",{_:"aT",class:"mtalk-bB mtalk-bc"},x)]),v="",v+=S?" "+S.name+" ":" "+j("bc")+" ",x=[t(0,v)],y.push(t("div",b,x)),x=[l||(l=t(0,"\ue650"))],w="mtalk-b7 mtalk-bt mtalk-bw mtalk-bx mtalk-bz mtalk-bc mtalk-bP",I==A&&(w+=" mtalk-b9 mtalk-bA"),y.push(t("i",{title:j("be"),"mx5-click":I!=A&&a+"\x1e_b2({to:0})",class:w},x)),x=[r||(r=t(0,"\ue651"))],w="mtalk-b7 mtalk-bt mtalk-bw mtalk-bx mtalk-bz mtalk-bc mtalk-bP mtalk-b0",I==z&&(w+=" mtalk-b9 mtalk-bA"),y.push(t("i",{title:j("bf"),"mx5-click":I!=z&&a+"\x1e_b2({to:1})",class:w},x)),_.push(t("div",s,y)),$)if($.error)x=[t(0,$.error)],y=[t("span",c,x)],x=[t(0,j("bh"))],y.push(t("span",{class:"mtalk-bN mtalk-by",title:j("bi"),"mx5-click":a+"\x1e_b4()"},x)),_.push(t("div",o,y));else{x=[t(0,S.comment)],y=[t("span",d,x)],_.push(t("div",{class:"mtalk-bC mtalk-bt mtalk-bw mtalk-c_",title:S.comment},y)),y=[];for(let e=C.length,i=0;i<e;i+=1){let e=C[i];x=[t(0,e.icon,1)],w="mtalk-bc mtalk-bE mtalk-bI mtalk-bO mtalk-bi mtalk-cf",e.id==D&&(w+=" mtalk-cg"),y.push(t("i",{title:e.id!=D&&j(e.lang),"mx5-click":e.id!=D&&a+"\x1e_b3({to:'"+p(e.id)+"'})",class:w},x))}_.push(t("div",m,y)),y=[];for(let e=C.length,i=0;i<e;i+=1){let e=C[i];w="mtalk-bK",D!=e.id&&(w+=" mtalk-bv"),y.push(t("div",{"mx5-owner":a,"mx5-view":e.view,class:w}))}_.push(t("div",f,y))}else n?_.push(n):_.push(n=t("div",{_:"aU",class:"mtalk-bP mtalk-bh mtalk-cb mtalk-cc"}));return _.push(t("div",{"mx5-owner":a,$:"height,minHeight","mx5-view":"ui/minotify?isMin="+k(g,I==A,"aT"),class:"mtalk-bh mtalk-bo mtalk-bp"})),u=[t("div",{class:"mtalk-b1 mtalk-bL mtalk-bP mtalk-bR mtalk-bS mtalk-bf mtalk-bg mtalk-bk",style:"right:"+M+"px;bottom:"+T+"px;height:"+I+"px","mx5-contextmenu":a+"\x1e_bQ()"},_),t("div",{"mx5-owner":a,"mx5-view":"ui/chat",class:"mtalk-bg mtalk-bo mtalk-bp mtalk-bt"})],t(a,0,u)},init(){let e=this.render.bind(this);g.on("basic.changed",e),this.on("destroy",(()=>{g.off("basic.changed",e),g.fire("destroy")})),g.setup();this.set({tabs:y,active:"bc",dockY:26,viewHeight:.8,minHeight:28,maxHeight:w(1,26),right:10,bottom:26,height:w(.8,26)})},async render(){let e=g.getBasic(),t=g.getCurrent();this.digest({current:t,basic:e})},"_b0<pointerdown>"(e){let{eventTarget:t,pageY:a}=e,i=this.get("height"),l=this.get("minHeight"),r=this.get("maxHeight"),n=r-l,{classList:s}=t;s.add("mtalk-b4"),p._bA(t),this._bm(e,(e=>{let t=a-e.pageY,s=i+t;s>r?s=r:s<l&&(s=l);let b=(s-l)/n;this.digest({viewHeight:b,height:s})}),(()=>{s.remove("mtalk-b4"),p._bu()}))},_b1(){let e=this.get("viewHeight"),t=this.get("dockY");this.digest({maxHeight:w(1,t),height:w(e,t)})},"_b2<click>"({params:e}){this.set({viewHeight:e.to}),this._b1()},"_b3<click>"({params:e}){this.digest({active:e.to})},"_b4<click>"(){g.retryBasic()},"$win<resize>"(){this._b1()}}).merge(k)})),define("ui/minotify",["magix5","../data/index"],((e,t,a)=>{let i=e("magix5"),l=e("../data/index"),{View:r,mark:n}=i;a.exports=r.extend({init(){let e=e=>{let t,a=l.getOpened();if(a)for(let i in e.ids)if(!a.includes(i)){t=1;break}t=1,t&&this.render()};l.on("message.income",e),this.on("destroy",(()=>{l.off("message.income",e)}))},assign(e){this.set(e)},render(){if(this.get("isMin")){let{root:e}=this,{classList:t}=e;if(!t.contains("mtalk-cF")){t.add("mtalk-cF");let e=n(this,"_b5");setTimeout((()=>{e()&&t.remove("mtalk-cF")}),200)}}}})})),define("ui/recents",["magix5","../data/index"],((e,t,a)=>{let i,l={class:"mtalk-bK mtalk-bT mtalk-bU mtalk-bi mtalk-bj"},r={class:"mtalk-bI mtalk-bJ mtalk-bk mtalk-bu"},n={class:"mtalk-bC mtalk-bO mtalk-ci"},s=e("magix5"),b=e("../data/index"),{View:o,mark:c}=s;a.exports=o.extend({tmpl:(e,t,a,s,b,o,c)=>{let d,m,f,h,g,{recents:k,latest:p,unread:u}=e;if(g=[],k)for(let e=k.length;e--;){let i=k[e];if(!i.error){h=[],h.push(t("div",{class:"mtalk-ch",style:"background-image:url("+i.avatar+")"})),f=[],m=[t(0,i.name)],f.push(t("div",0,m));let e=p&&p[i.id];e&&(m=[t(0,e)],f.push(t("div",{class:"mtalk-bC mtalk-bM mtalk-bW",title:e},m))),h.push(t("div",r,f));let l=u&&u[i.id];l&&(f=[t(0,l)],h.push(t("div",n,f))),g.push(t("div",{class:"mtalk-b8 mtalk-bt mtalk-bw","mx5-click":a+"\x1e_bZ({id:'"+c(i.id)+"'})",title:i.name},h))}}else i?g.push(i):g.push(i=t("div",{_:"aT",class:"mtalk-bP mtalk-bh mtalk-cb mtalk-cc"}));return d=[t("div",l,g)],t(a,0,d)},init(){let e=this._bO(this.render);b.on("recents.changed",e),b.on("unread.changed",e),this.on("destroy",(()=>{b.off("targets.changed",e),b.off("unread.changed",e)}))},async render(e){let t=b.getUnread();if(this.digest({unread:t}),!e||"recents.changed"==e.type){let e=c(this,"_bR"),t=b.getRecents(),a=await b.translateTargets(t);e()&&this.digest({recents:a,latest:b.getLatest()})}},"_bZ<click>"({params:e}){b.open(e.id)}})}));